
properties([
  disableConcurrentBuilds(),
  parameters([
    string(name: 'REPO_REFSPEC', defaultValue: '+refs/pull/*:refs/remotes/origin/pr/*', description: 'clone refspec'),
    string(name: 'TARGET_BRANCH_NAME', defaultValue: 'refs/remotes/origin/pr/2/head', description: 'Target full ref branch name')
  ]),
  pipelineTriggers([])
])

echo "${scm.getRepositories()}"
echo "${scm.getBranches()}"
echo "${scm.getExtensions()}"

/*
step([
    $class: "GitHubCommitStatusSetter",
    reposSource: [$class: "ManuallyEnteredRepositorySource", url: "https://github.com/my-org/my-repo"],
    contextSource: [$class: "ManuallyEnteredCommitContextSource", context: "ci/jenkins/build-status"],
    errorHandlers: [[$class: "ChangingBuildStatusErrorHandler", result: "UNSTABLE"]],
    statusResultSource: [ $class: "ConditionalStatusResultSource", results: [[$class: "AnyBuildResult", message: message, state: state]] ]
])
*/

stage('build') {
    echo "Building..."
    echo "Something cool"
    echo "ping"
    echo "pong"
}
